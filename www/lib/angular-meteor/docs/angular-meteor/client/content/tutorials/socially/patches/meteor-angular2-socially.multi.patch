From 0331ca3acd1ab58116d85e3023b2e6212eff5f1c Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 16:57:38 +0300
Subject: [PATCH 01/83] Creates tutorial app.

---
 .meteor/.finished-upgraders | 12 +++++++++
 .meteor/.id                 |  7 +++++
 .meteor/packages            | 20 ++++++++++++++
 .meteor/platforms           |  2 ++
 .meteor/release             |  1 +
 .meteor/versions            | 66 +++++++++++++++++++++++++++++++++++++++++++++
 6 files changed, 108 insertions(+)
 create mode 100644 .meteor/.finished-upgraders
 create mode 100644 .meteor/.id
 create mode 100644 .meteor/packages
 create mode 100644 .meteor/platforms
 create mode 100644 .meteor/release
 create mode 100644 .meteor/versions

diff --git a/.meteor/.finished-upgraders b/.meteor/.finished-upgraders
new file mode 100644
index 0000000..61ee313
--- /dev/null
+++ b/.meteor/.finished-upgraders
@@ -0,0 +1,12 @@
+# This file contains information which helps Meteor properly upgrade your
+# app when you run 'meteor update'. You should check it into version control
+# with your project.
+
+notices-for-0.9.0
+notices-for-0.9.1
+0.9.4-platform-file
+notices-for-facebook-graph-api-2
+1.2.0-standard-minifiers-package
+1.2.0-meteor-platform-split
+1.2.0-cordova-changes
+1.2.0-breaking-changes
diff --git a/.meteor/.id b/.meteor/.id
new file mode 100644
index 0000000..7969a61
--- /dev/null
+++ b/.meteor/.id
@@ -0,0 +1,7 @@
+# This file contains a token that is unique to your project.
+# Check it into your repository along with the rest of this directory.
+# It can be used for purposes such as:
+#   - ensuring you don't accidentally deploy one app on top of another
+#   - providing package authors with aggregated statistics
+
+pk1ynrhdqnbzrnlqkz
diff --git a/.meteor/packages b/.meteor/packages
new file mode 100644
index 0000000..a9f8340
--- /dev/null
+++ b/.meteor/packages
@@ -0,0 +1,20 @@
+# Meteor packages used by this project, one per line.
+# Check this file (and the other files in this directory) into your repository.
+#
+# 'meteor add' and 'meteor remove' will edit this file for you,
+# but you can also edit it by hand.
+
+meteor-base             # Packages every Meteor app needs to have
+mobile-experience       # Packages for a great mobile UX
+mongo                   # The database Meteor supports right now
+blaze-html-templates    # Compile .html files into Meteor Blaze views
+session                 # Client-side reactive dictionary for your app
+jquery                  # Helpful client-side library
+tracker                 # Meteor's client-side reactive programming library
+
+standard-minifiers      # JS/CSS minifiers run for production mode
+es5-shim                # ECMAScript 5 compatibility for older browsers.
+ecmascript              # Enable ECMAScript2015+ syntax in app code
+
+autopublish             # Publish all data to the clients (for prototyping)
+insecure                # Allow all DB writes from clients (for prototyping)
diff --git a/.meteor/platforms b/.meteor/platforms
new file mode 100644
index 0000000..efeba1b
--- /dev/null
+++ b/.meteor/platforms
@@ -0,0 +1,2 @@
+server
+browser
diff --git a/.meteor/release b/.meteor/release
new file mode 100644
index 0000000..238bbcc
--- /dev/null
+++ b/.meteor/release
@@ -0,0 +1 @@
+METEOR@1.2.0.1
diff --git a/.meteor/versions b/.meteor/versions
new file mode 100644
index 0000000..e378b68
--- /dev/null
+++ b/.meteor/versions
@@ -0,0 +1,66 @@
+autopublish@1.0.4
+autoupdate@1.2.3
+babel-compiler@5.8.24_1
+babel-runtime@0.1.4
+base64@1.0.4
+binary-heap@1.0.4
+blaze@2.1.3
+blaze-html-templates@1.0.1
+blaze-tools@1.0.4
+boilerplate-generator@1.0.4
+caching-compiler@1.0.0
+caching-html-compiler@1.0.1
+callback-hook@1.0.4
+check@1.0.6
+ddp@1.2.2
+ddp-client@1.2.1
+ddp-common@1.2.1
+ddp-server@1.2.1
+deps@1.0.9
+diff-sequence@1.0.1
+ecmascript@0.1.4
+ecmascript-collections@0.1.6
+ejson@1.0.7
+es5-shim@4.1.13
+fastclick@1.0.7
+geojson-utils@1.0.4
+hot-code-push@1.0.0
+html-tools@1.0.5
+htmljs@1.0.5
+http@1.1.1
+id-map@1.0.4
+insecure@1.0.4
+jquery@1.11.4
+launch-screen@1.0.4
+livedata@1.0.15
+logging@1.0.8
+meteor@1.1.7
+meteor-base@1.0.1
+minifiers@1.1.7
+minimongo@1.0.9
+mobile-experience@1.0.1
+mobile-status-bar@1.0.6
+mongo@1.1.1
+mongo-id@1.0.1
+npm-mongo@1.4.39_1
+observe-sequence@1.0.7
+ordered-dict@1.0.4
+promise@0.4.8
+random@1.0.4
+reactive-dict@1.1.1
+reactive-var@1.0.6
+reload@1.1.4
+retry@1.0.4
+routepolicy@1.0.6
+session@1.1.1
+spacebars@1.0.7
+spacebars-compiler@1.0.7
+standard-minifiers@1.0.0
+templating@1.1.3
+templating-tools@1.0.0
+tracker@1.0.8
+ui@1.0.8
+underscore@1.0.4
+url@1.0.5
+webapp@1.2.2
+webapp-hashing@1.0.5
-- 
2.4.9 (Apple Git-60)


From a2759654b831fdc60cf071096dd9ace110b38019 Mon Sep 17 00:00:00 2001
From: Alex <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:01:41 +0300
Subject: [PATCH 02/83] Create README.md

---
 README.md | 2 ++
 1 file changed, 2 insertions(+)
 create mode 100644 README.md

diff --git a/README.md b/README.md
new file mode 100644
index 0000000..61fc3ee
--- /dev/null
+++ b/README.md
@@ -0,0 +1,2 @@
+# Angular2-Meteor Tutorial
+Tutorial is based on building Angular2 UI for a Meteor app called Socially.
-- 
2.4.9 (Apple Git-60)


From 982577678528ecb16ccea76f9c4a178f09b8512f Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:03:11 +0300
Subject: [PATCH 03/83] Step 0.1: add client/index.html

---
 client/index.html | 3 +++
 1 file changed, 3 insertions(+)
 create mode 100644 client/index.html

diff --git a/client/index.html b/client/index.html
new file mode 100644
index 0000000..ef412ef
--- /dev/null
+++ b/client/index.html
@@ -0,0 +1,3 @@
+<body>
+  <p>Nothing here</p>
+</body>
-- 
2.4.9 (Apple Git-60)


From 32756437d6a3cd6144aaea879dee45187eaf6d01 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:08:36 +0300
Subject: [PATCH 04/83] Step 0.2: add Angular2 package

---
 .meteor/packages | 1 +
 1 file changed, 1 insertion(+)

diff --git a/.meteor/packages b/.meteor/packages
index a9f8340..feb8272 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -18,3 +18,4 @@ ecmascript              # Enable ECMAScript2015+ syntax in app code
 
 autopublish             # Publish all data to the clients (for prototyping)
 insecure                # Allow all DB writes from clients (for prototyping)
+urigo:angular2-meteor
-- 
2.4.9 (Apple Git-60)


From 8ae5857626a2964f179c35e501a301c539c94bb8 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:09:47 +0300
Subject: [PATCH 05/83] Step 0.3: remove Blaze package

---
 .meteor/packages | 1 -
 1 file changed, 1 deletion(-)

diff --git a/.meteor/packages b/.meteor/packages
index feb8272..c70808e 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -7,7 +7,6 @@
 meteor-base             # Packages every Meteor app needs to have
 mobile-experience       # Packages for a great mobile UX
 mongo                   # The database Meteor supports right now
-blaze-html-templates    # Compile .html files into Meteor Blaze views
 session                 # Client-side reactive dictionary for your app
 jquery                  # Helpful client-side library
 tracker                 # Meteor's client-side reactive programming library
-- 
2.4.9 (Apple Git-60)


From 0d456d718868498b1f3560d0c0e0a97d03bd9205 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:10:32 +0300
Subject: [PATCH 06/83] Step 0.4: remove ecmascript package

---
 .meteor/packages | 1 -
 1 file changed, 1 deletion(-)

diff --git a/.meteor/packages b/.meteor/packages
index c70808e..2f89e25 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -13,7 +13,6 @@ tracker                 # Meteor's client-side reactive programming library
 
 standard-minifiers      # JS/CSS minifiers run for production mode
 es5-shim                # ECMAScript 5 compatibility for older browsers.
-ecmascript              # Enable ECMAScript2015+ syntax in app code
 
 autopublish             # Publish all data to the clients (for prototyping)
 insecure                # Allow all DB writes from clients (for prototyping)
-- 
2.4.9 (Apple Git-60)


From e116f09c9f71facbcf6b247be9050262e7755bf9 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:12:43 +0300
Subject: [PATCH 07/83] Step 0.5: create root component

---
 client/app.ts | 11 +++++++++++
 1 file changed, 11 insertions(+)
 create mode 100644 client/app.ts

diff --git a/client/app.ts b/client/app.ts
new file mode 100644
index 0000000..5dd0b52
--- /dev/null
+++ b/client/app.ts
@@ -0,0 +1,11 @@
+import {Component, View, bootstrap} from 'angular2/angular2';
+
+@Component({
+    selector: 'app'
+})
+@View({
+    template: 'Hello World!'
+})
+class Socially { }
+
+bootstrap(Socially);
-- 
2.4.9 (Apple Git-60)


From 67c4d2a7773cf9b48fc6696b07deec63018c4644 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:14:08 +0300
Subject: [PATCH 08/83] Step 0.6: load root component

---
 client/index.html | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/client/index.html b/client/index.html
index ef412ef..19d3bf1 100644
--- a/client/index.html
+++ b/client/index.html
@@ -1,3 +1,4 @@
 <body>
-  <p>Nothing here</p>
+  <app></app>
+  <script>System.import('client/app');</script>
 </body>
-- 
2.4.9 (Apple Git-60)


From e6aec95c3cebf33b6332c2af3e347e0cdd135a81 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:19:17 +0300
Subject: [PATCH 09/83] Step 0.7: remove index.html

---
 client/index.html | 4 ----
 1 file changed, 4 deletions(-)
 delete mode 100644 client/index.html

diff --git a/client/index.html b/client/index.html
deleted file mode 100644
index 19d3bf1..0000000
--- a/client/index.html
+++ /dev/null
@@ -1,4 +0,0 @@
-<body>
-  <app></app>
-  <script>System.import('client/app');</script>
-</body>
-- 
2.4.9 (Apple Git-60)


From 0cef422be147d580b1609a8b3115bf6f689b258e Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:20:40 +0300
Subject: [PATCH 10/83] Step 0.8: add reference to the declaration file

---
 client/app.ts | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/client/app.ts b/client/app.ts
index 5dd0b52..b918366 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -1,3 +1,5 @@
+/// &lt;reference path="../typings/angular2-meteor.d.ts" />
+
 import {Component, View, bootstrap} from 'angular2/angular2';
 
 @Component({
-- 
2.4.9 (Apple Git-60)


From acfae5cd28420a60891d17807a08eb871f734e8d Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:21:40 +0300
Subject: [PATCH 11/83] Step 0.9: create app.html template

---
 client/app.html | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 client/app.html

diff --git a/client/app.html b/client/app.html
new file mode 100644
index 0000000..a9c8ddc
--- /dev/null
+++ b/client/app.html
@@ -0,0 +1 @@
+<p>Nothing here {{ 'yet' + '!' }}</p>
-- 
2.4.9 (Apple Git-60)


From e6beee76e2a6f52679e1d62549b8f6731d781bd5 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:22:33 +0300
Subject: [PATCH 12/83] remove versions

---
 .meteor/versions | 66 --------------------------------------------------------
 1 file changed, 66 deletions(-)
 delete mode 100644 .meteor/versions

diff --git a/.meteor/versions b/.meteor/versions
deleted file mode 100644
index e378b68..0000000
--- a/.meteor/versions
+++ /dev/null
@@ -1,66 +0,0 @@
-autopublish@1.0.4
-autoupdate@1.2.3
-babel-compiler@5.8.24_1
-babel-runtime@0.1.4
-base64@1.0.4
-binary-heap@1.0.4
-blaze@2.1.3
-blaze-html-templates@1.0.1
-blaze-tools@1.0.4
-boilerplate-generator@1.0.4
-caching-compiler@1.0.0
-caching-html-compiler@1.0.1
-callback-hook@1.0.4
-check@1.0.6
-ddp@1.2.2
-ddp-client@1.2.1
-ddp-common@1.2.1
-ddp-server@1.2.1
-deps@1.0.9
-diff-sequence@1.0.1
-ecmascript@0.1.4
-ecmascript-collections@0.1.6
-ejson@1.0.7
-es5-shim@4.1.13
-fastclick@1.0.7
-geojson-utils@1.0.4
-hot-code-push@1.0.0
-html-tools@1.0.5
-htmljs@1.0.5
-http@1.1.1
-id-map@1.0.4
-insecure@1.0.4
-jquery@1.11.4
-launch-screen@1.0.4
-livedata@1.0.15
-logging@1.0.8
-meteor@1.1.7
-meteor-base@1.0.1
-minifiers@1.1.7
-minimongo@1.0.9
-mobile-experience@1.0.1
-mobile-status-bar@1.0.6
-mongo@1.1.1
-mongo-id@1.0.1
-npm-mongo@1.4.39_1
-observe-sequence@1.0.7
-ordered-dict@1.0.4
-promise@0.4.8
-random@1.0.4
-reactive-dict@1.1.1
-reactive-var@1.0.6
-reload@1.1.4
-retry@1.0.4
-routepolicy@1.0.6
-session@1.1.1
-spacebars@1.0.7
-spacebars-compiler@1.0.7
-standard-minifiers@1.0.0
-templating@1.1.3
-templating-tools@1.0.0
-tracker@1.0.8
-ui@1.0.8
-underscore@1.0.4
-url@1.0.5
-webapp@1.2.2
-webapp-hashing@1.0.5
-- 
2.4.9 (Apple Git-60)


From 7cc4934786f99e97fc678450b6d9d7f23f68666b Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:23:10 +0300
Subject: [PATCH 13/83] Step 0.10: change inline template to templateUrl

---
 client/app.ts | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/app.ts b/client/app.ts
index b918366..2dcaa25 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -6,7 +6,7 @@ import {Component, View, bootstrap} from 'angular2/angular2';
     selector: 'app'
 })
 @View({
-    template: 'Hello World!'
+    templateUrl: 'client/app.html'
 })
 class Socially { }
 
-- 
2.4.9 (Apple Git-60)


From 8a2ee0884b53e36678a74cb4e43cc3cc26fa29a7 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:29:40 +0300
Subject: [PATCH 14/83] Step 1.1: add static HTML to the template

---
 client/app.html | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

diff --git a/client/app.html b/client/app.html
index a9c8ddc..dd1ef68 100644
--- a/client/app.html
+++ b/client/app.html
@@ -1 +1,14 @@
-<p>Nothing here {{ 'yet' + '!' }}</p>
+<ul>
+  <li>
+    <span>Dubstep-Free Zone</span>
+    <p>
+      Can we please just for an evening not listen to dubstep.
+    </p>
+  </li>
+  <li>
+    <span>All dubstep all the time</span>
+    <p>
+      Get it on!
+    </p>
+  </li>
+</ul>
-- 
2.4.9 (Apple Git-60)


From 2e2869532817fa04e7c4f31eafa84ea6f75569a2 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:30:49 +0300
Subject: [PATCH 15/83] Step 2.1: use dynamic template with NgFor

---
 client/app.html | 23 +++++++++--------------
 1 file changed, 9 insertions(+), 14 deletions(-)

diff --git a/client/app.html b/client/app.html
index dd1ef68..3197b77 100644
--- a/client/app.html
+++ b/client/app.html
@@ -1,14 +1,9 @@
-<ul>
-  <li>
-    <span>Dubstep-Free Zone</span>
-    <p>
-      Can we please just for an evening not listen to dubstep.
-    </p>
-  </li>
-  <li>
-    <span>All dubstep all the time</span>
-    <p>
-      Get it on!
-    </p>
-  </li>
-</ul>
+<div>
+  <ul>
+    <li *ng-for="#party of parties">
+      {{party.name}}
+      <p>{{party.description}}</p>
+      <p>{{party.location}}</p>
+    </li>
+  </ul>
+</div>
-- 
2.4.9 (Apple Git-60)


From 5e617296e17f9f0f5b30d8b50571ac85ecdae9b8 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:32:31 +0300
Subject: [PATCH 16/83] Step 2.2: load NgFor directive, add it to the View's
 directives list

---
 client/app.ts | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index 2dcaa25..30495cd 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -1,12 +1,13 @@
 /// &lt;reference path="../typings/angular2-meteor.d.ts" />
 
-import {Component, View, bootstrap} from 'angular2/angular2';
+import {Component, View, NgFor, bootstrap} from 'angular2/angular2';
 
 @Component({
     selector: 'app'
 })
 @View({
-    templateUrl: 'client/app.html'
+    templateUrl: 'client/app.html',
+    directives: [NgFor]
 })
 class Socially { }
 
-- 
2.4.9 (Apple Git-60)


From 6f29facacb9ebd0db4838be3bf4176eda54b24a0 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:34:52 +0300
Subject: [PATCH 17/83] Step 2.3: load parties data into the app

---
 client/app.ts | 19 ++++++++++++++++++-
 1 file changed, 18 insertions(+), 1 deletion(-)

diff --git a/client/app.ts b/client/app.ts
index 30495cd..bce2d15 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -9,6 +9,23 @@ import {Component, View, NgFor, bootstrap} from 'angular2/angular2';
     templateUrl: 'client/app.html',
     directives: [NgFor]
 })
-class Socially { }
+class Socially {
+    constructor () {
+        this.parties = [
+          {'name': 'Dubstep-Free Zone',
+           'description': 'Can we please just for an evening not listen to dubstep.',
+           'location': 'Palo Alto'
+          },
+          {'name': 'All dubstep all the time',
+           'description': 'Get it on!',
+           'location': 'Palo Alto'
+          },
+          {'name': 'Savage lounging',
+           'description': 'Leisure suit required. And only fiercest manners.',
+           'location': 'San Francisco'
+          }
+        ];
+    }
+}
 
 bootstrap(Socially);
-- 
2.4.9 (Apple Git-60)


From b82cde4cace0d97260267ab2d09c63fac91702e6 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 17:36:13 +0300
Subject: [PATCH 18/83] Step 2.4: define parties property

---
 client/app.ts | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/client/app.ts b/client/app.ts
index bce2d15..b52e219 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -10,6 +10,8 @@ import {Component, View, NgFor, bootstrap} from 'angular2/angular2';
     directives: [NgFor]
 })
 class Socially {
+    parties: Array&lt;Object>;
+
     constructor () {
         this.parties = [
           {'name': 'Dubstep-Free Zone',
-- 
2.4.9 (Apple Git-60)


From 58dc82a74e7366dd0cf9cf652de45c4e32600c09 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 18:30:37 +0300
Subject: [PATCH 19/83] Step 3.1:  add the parties collection

---
 collections/parties.ts | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 collections/parties.ts

diff --git a/collections/parties.ts b/collections/parties.ts
new file mode 100644
index 0000000..83fbd07
--- /dev/null
+++ b/collections/parties.ts
@@ -0,0 +1 @@
+export var Parties = new Mongo.Collection('parties');
-- 
2.4.9 (Apple Git-60)


From 45b2f239abdebb42a5f246702c8c25cb1a261f0b Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 18:36:20 +0300
Subject: [PATCH 20/83] Step 3.2:  add reference to the declaration file

---
 collections/parties.ts | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/collections/parties.ts b/collections/parties.ts
index 83fbd07..d1ed853 100644
--- a/collections/parties.ts
+++ b/collections/parties.ts
@@ -1 +1,3 @@
+/// &lt;reference path="../typings/angular2-meteor.d.ts" />
+
 export var Parties = new Mongo.Collection('parties');
-- 
2.4.9 (Apple Git-60)


From 417b8f831497e761aa9f0d131b8947830566f49c Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 18:36:56 +0300
Subject: [PATCH 21/83] Step 3.3:  import the parties collection

---
 client/app.ts | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/client/app.ts b/client/app.ts
index b52e219..061d6b6 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -2,6 +2,8 @@
 
 import {Component, View, NgFor, bootstrap} from 'angular2/angular2';
 
+import {Parties} from 'collections/parties';
+
 @Component({
     selector: 'app'
 })
-- 
2.4.9 (Apple Git-60)


From ce0ca1c92b91f4f4aff85454c2065107b2fc8111 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Mon, 19 Oct 2015 13:28:41 +0300
Subject: [PATCH 22/83] Step 3.4: fetch parties

---
 client/app.ts | 15 +--------------
 1 file changed, 1 insertion(+), 14 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index 061d6b6..3506859 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -15,20 +15,7 @@ class Socially {
     parties: Array&lt;Object>;
 
     constructor () {
-        this.parties = [
-          {'name': 'Dubstep-Free Zone',
-           'description': 'Can we please just for an evening not listen to dubstep.',
-           'location': 'Palo Alto'
-          },
-          {'name': 'All dubstep all the time',
-           'description': 'Get it on!',
-           'location': 'Palo Alto'
-          },
-          {'name': 'Savage lounging',
-           'description': 'Leisure suit required. And only fiercest manners.',
-           'location': 'San Francisco'
-          }
-        ];
+        this.parties = Parties.find().fetch();
     }
 }
 
-- 
2.4.9 (Apple Git-60)


From f72dac183559a25131430d0eafbd15f186123942 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 26 Sep 2015 18:47:23 +0300
Subject: [PATCH 23/83] Step 3.5:  fetch parties reactively

---
 client/app.ts | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index 3506859..7903452 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -1,6 +1,6 @@
 /// &lt;reference path="../typings/angular2-meteor.d.ts" />
 
-import {Component, View, NgFor, bootstrap} from 'angular2/angular2';
+import {NgZone, Component, View, NgFor, bootstrap} from 'angular2/angular2';
 
 import {Parties} from 'collections/parties';
 
@@ -14,8 +14,10 @@ import {Parties} from 'collections/parties';
 class Socially {
     parties: Array&lt;Object>;
 
-    constructor () {
-        this.parties = Parties.find().fetch();
+    constructor (zone: NgZone) {
+        Tracker.autorun(() => zone.run(() => {
+            this.parties = Parties.find().fetch();
+        }));
     }
 }
 
-- 
2.4.9 (Apple Git-60)


From d75d282ea7a0a144d589385ae0ae8ea7158dbe5f Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 8 Nov 2015 02:26:41 +0300
Subject: [PATCH 24/83] Step 3.6: initialize collection on server side

---
 server/main.ts | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 server/main.ts

diff --git a/server/main.ts b/server/main.ts
new file mode 100644
index 0000000..64dbcb6
--- /dev/null
+++ b/server/main.ts
@@ -0,0 +1 @@
+import 'collections/parties';
-- 
2.4.9 (Apple Git-60)


From fe8feaff62c3292678a7ee7aab3afd5b94e7e6a5 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Wed, 14 Oct 2015 22:55:11 +0300
Subject: [PATCH 25/83] Step 3.7: Blaze-like binding to Angular2

---
 client/app.ts | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index 7903452..d845cf7 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -1,9 +1,11 @@
 /// &lt;reference path="../typings/angular2-meteor.d.ts" />
 
-import {NgZone, Component, View, NgFor, bootstrap} from 'angular2/angular2';
+import {Component, View, NgFor} from 'angular2/angular2';
 
 import {Parties} from 'collections/parties';
 
+import {bootstrap} from 'angular2-meteor';
+
 @Component({
     selector: 'app'
 })
@@ -12,12 +14,10 @@ import {Parties} from 'collections/parties';
     directives: [NgFor]
 })
 class Socially {
-    parties: Array&lt;Object>;
+    parties: Mongo.Cursor&lt;Object>;
 
-    constructor (zone: NgZone) {
-        Tracker.autorun(() => zone.run(() => {
-            this.parties = Parties.find().fetch();
-        }));
+    constructor () {
+        this.parties = Parties.find();
     }
 }
 
-- 
2.4.9 (Apple Git-60)


From 3ad2af67cc7e92a5544e69492950914d829e4231 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Wed, 14 Oct 2015 23:21:31 +0300
Subject: [PATCH 26/83] Step 3.8: load initial parties on server side

---
 server/load_parties.ts | 28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)
 create mode 100644 server/load_parties.ts

diff --git a/server/load_parties.ts b/server/load_parties.ts
new file mode 100644
index 0000000..65c914a
--- /dev/null
+++ b/server/load_parties.ts
@@ -0,0 +1,28 @@
+import {Parties} from 'collections/parties';
+
+export function loadParties() {
+    if (Parties.find().count() === 0) {
+
+    var parties = [
+        {
+            'name': 'Dubstep-Free Zone',
+            'description': 'Can we please just for an evening not listen to dubstep.',
+            'location': 'Palo Alto'
+        },
+        {
+            'name': 'All dubstep all the time',
+            'description': 'Get it on!',
+            'location': 'Palo Alto'
+        },
+        {
+            'name': 'Savage lounging',
+            'description': 'Leisure suit required. And only fiercest manners.',
+            'location': 'San Francisco'
+        }
+    ];
+
+    for (var i = 0; i < parties.length; i++) {
+        Parties.insert(parties[i]);
+    }
+  }
+};
-- 
2.4.9 (Apple Git-60)


From 726324de6b4bbe7b2505c63e69970e8404e5e6fe Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Wed, 14 Oct 2015 23:32:49 +0300
Subject: [PATCH 27/83] Step 3.9: bootstrap server side

---
 server/main.ts | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/server/main.ts b/server/main.ts
index 64dbcb6..80ba2c9 100644
--- a/server/main.ts
+++ b/server/main.ts
@@ -1 +1,3 @@
-import 'collections/parties';
+import {loadParties} from './load_parties';
+
+Meteor.startup(loadParties);
-- 
2.4.9 (Apple Git-60)


From 580fb5a5bd9278c55a9cd5ad2fea264177d8b10b Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 17 Oct 2015 14:58:32 +0300
Subject: [PATCH 28/83] Step 4.1:  create PartiesForm component

---
 client/parties-form/parties-form.ts | 11 +++++++++++
 1 file changed, 11 insertions(+)
 create mode 100644 client/parties-form/parties-form.ts

diff --git a/client/parties-form/parties-form.ts b/client/parties-form/parties-form.ts
new file mode 100644
index 0000000..6b50b1e
--- /dev/null
+++ b/client/parties-form/parties-form.ts
@@ -0,0 +1,11 @@
+/// &lt;reference path="../../typings/angular2-meteor.d.ts" />
+
+import {Component, View} from 'angular2/angular2';
+
+@Component({
+    selector: 'parties-form'
+})
+@View({
+    templateUrl: 'client/parties-form/parties-form.html'
+})
+export class PartiesForm { }
-- 
2.4.9 (Apple Git-60)


From cb4199a5e36de62daafeac611a6198e0631b7cb6 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 17 Oct 2015 15:48:01 +0300
Subject: [PATCH 29/83] Step 4.2: add parties-form.html template

---
 client/parties-form/parties-form.html | 9 +++++++++
 1 file changed, 9 insertions(+)
 create mode 100644 client/parties-form/parties-form.html

diff --git a/client/parties-form/parties-form.html b/client/parties-form/parties-form.html
new file mode 100644
index 0000000..df0bd89
--- /dev/null
+++ b/client/parties-form/parties-form.html
@@ -0,0 +1,9 @@
+<form>
+  <label>Name</label>
+  <input type="text">
+  <label>Description</label>
+  <input type="text">
+  <label>Location</label>
+  <input type="text">
+  <button>Add</button>
+</form>
-- 
2.4.9 (Apple Git-60)


From 298af75ec4def6867d27bec5b9acac6c34a59ac9 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 17 Oct 2015 16:03:48 +0300
Subject: [PATCH 30/83] Step 4.3: load the PartiesForm component

---
 client/app.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/client/app.html b/client/app.html
index 3197b77..3b7d5f2 100644
--- a/client/app.html
+++ b/client/app.html
@@ -1,4 +1,5 @@
 <div>
+  <parties-form></parties-form>
   <ul>
     <li *ng-for="#party of parties">
       {{party.name}}
-- 
2.4.9 (Apple Git-60)


From 1473fc6a0f18c1f79f14928951cfa3debb2616e7 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 17 Oct 2015 16:07:36 +0300
Subject: [PATCH 31/83] Step 4.4:  import the PartiesForm component and link it
 with the Socially component

---
 client/app.ts | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/client/app.ts b/client/app.ts
index d845cf7..e1ce3b9 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -6,12 +6,14 @@ import {Parties} from 'collections/parties';
 
 import {bootstrap} from 'angular2-meteor';
 
+import {PartiesForm} from 'client/parties-form/parties-form';
+
 @Component({
     selector: 'app'
 })
 @View({
     templateUrl: 'client/app.html',
-    directives: [NgFor]
+    directives: [NgFor, PartiesForm]
 })
 class Socially {
     parties: Mongo.Cursor&lt;Object>;
-- 
2.4.9 (Apple Git-60)


From 67dcba79ec8e050d9e5c186554197eb711d9923c Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 17 Oct 2015 17:32:28 +0300
Subject: [PATCH 32/83] Step 4.5:  import dependencies and add form directives
 to the View

---
 client/parties-form/parties-form.ts | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/client/parties-form/parties-form.ts b/client/parties-form/parties-form.ts
index 6b50b1e..7b5aa85 100644
--- a/client/parties-form/parties-form.ts
+++ b/client/parties-form/parties-form.ts
@@ -2,10 +2,13 @@
 
 import {Component, View} from 'angular2/angular2';
 
+import {FORM_DIRECTIVES, FormBuilder, ControlGroup, Validators} from 'angular2/angular2';
+
 @Component({
     selector: 'parties-form'
 })
 @View({
-    templateUrl: 'client/parties-form/parties-form.html'
+    templateUrl: 'client/parties-form/parties-form.html',
+    directives: [FORM_DIRECTIVES]
 })
 export class PartiesForm { }
-- 
2.4.9 (Apple Git-60)


From b456beedfb638bff0956d2942cfe8d7214ebf515 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 17 Oct 2015 17:41:26 +0300
Subject: [PATCH 33/83] Step 4.6:  build a form model

---
 client/parties-form/parties-form.ts | 13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

diff --git a/client/parties-form/parties-form.ts b/client/parties-form/parties-form.ts
index 7b5aa85..fc535dd 100644
--- a/client/parties-form/parties-form.ts
+++ b/client/parties-form/parties-form.ts
@@ -11,4 +11,15 @@ import {FORM_DIRECTIVES, FormBuilder, ControlGroup, Validators} from 'angular2/a
     templateUrl: 'client/parties-form/parties-form.html',
     directives: [FORM_DIRECTIVES]
 })
-export class PartiesForm { }
+export class PartiesForm {
+    partiesForm: ControlGroup;
+
+    constructor() {
+        var fb = new FormBuilder();
+        this.partiesForm = fb.group({
+            name: [''],
+            description: [''],
+            location: ['']
+        });
+    }
+}
-- 
2.4.9 (Apple Git-60)


From fb9dc517aadde7a0f4b3e4e7e4c556e0604302b6 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 17 Oct 2015 18:34:57 +0300
Subject: [PATCH 34/83] Step 4.7:  add form validation

---
 client/parties-form/parties-form.ts | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/client/parties-form/parties-form.ts b/client/parties-form/parties-form.ts
index fc535dd..4b12b0a 100644
--- a/client/parties-form/parties-form.ts
+++ b/client/parties-form/parties-form.ts
@@ -17,9 +17,9 @@ export class PartiesForm {
     constructor() {
         var fb = new FormBuilder();
         this.partiesForm = fb.group({
-            name: [''],
+            name: ['', Validators.required],
             description: [''],
-            location: ['']
+            location: ['', Validators.required]
         });
     }
 }
-- 
2.4.9 (Apple Git-60)


From 289d973cc0960557a59d4d7d2be460af3a5658cc Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 17 Oct 2015 20:20:32 +0300
Subject: [PATCH 35/83] Step 4.8:  link the form and its model together

---
 client/parties-form/parties-form.html | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/client/parties-form/parties-form.html b/client/parties-form/parties-form.html
index df0bd89..9f27831 100644
--- a/client/parties-form/parties-form.html
+++ b/client/parties-form/parties-form.html
@@ -1,9 +1,9 @@
-<form>
+<form [ng-form-model]="partiesForm">
   <label>Name</label>
-  <input type="text">
+  <input type="text" ng-control="name">
   <label>Description</label>
-  <input type="text">
+  <input type="text" ng-control="description">
   <label>Location</label>
-  <input type="text">
+  <input type="text" ng-control="location">
   <button>Add</button>
 </form>
-- 
2.4.9 (Apple Git-60)


From afa8739df4e5f7755794639bbf2ca0ed8ae06273 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 17 Oct 2015 20:33:32 +0300
Subject: [PATCH 36/83] Step 4.9: add submit handler inside the template

---
 client/parties-form/parties-form.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/parties-form/parties-form.html b/client/parties-form/parties-form.html
index 9f27831..ec3a114 100644
--- a/client/parties-form/parties-form.html
+++ b/client/parties-form/parties-form.html
@@ -1,4 +1,4 @@
-<form [ng-form-model]="partiesForm">
+<form [ng-form-model]="partiesForm" #f="form" (submit)="addParty(f.value)">
   <label>Name</label>
   <input type="text" ng-control="name">
   <label>Description</label>
-- 
2.4.9 (Apple Git-60)


From 6e3be30d30ea1b9f49fd8832b69c500fcdbc35f0 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 17 Oct 2015 20:34:52 +0300
Subject: [PATCH 37/83] Step 4.10:  add addParty method inside the component

---
 client/parties-form/parties-form.ts | 18 +++++++++++++++++-
 1 file changed, 17 insertions(+), 1 deletion(-)

diff --git a/client/parties-form/parties-form.ts b/client/parties-form/parties-form.ts
index 4b12b0a..18dee47 100644
--- a/client/parties-form/parties-form.ts
+++ b/client/parties-form/parties-form.ts
@@ -2,7 +2,9 @@
 
 import {Component, View} from 'angular2/angular2';
 
-import {FORM_DIRECTIVES, FormBuilder, ControlGroup, Validators} from 'angular2/angular2';
+import {FORM_DIRECTIVES, FormBuilder, Control, ControlGroup, Validators} from 'angular2/angular2';
+
+import {Parties} from 'collections/parties';
 
 @Component({
     selector: 'parties-form'
@@ -22,4 +24,18 @@ export class PartiesForm {
             location: ['', Validators.required]
         });
     }
+
+    addParty(party) {
+        if (this.partiesForm.valid) {
+            Parties.insert({
+                name: party.name,
+                description: party.description,
+                location: party.location
+            });
+
+            (&lt;Control>this.partiesForm.controls['name']).updateValue('');
+            (&lt;Control>this.partiesForm.controls['description']).updateValue('');
+            (&lt;Control>this.partiesForm.controls['location']).updateValue('');
+        }
+    }
 }
-- 
2.4.9 (Apple Git-60)


From b41baf36b9e679bb70612312de9a002c73995e0b Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 17 Oct 2015 20:57:18 +0300
Subject: [PATCH 38/83] Step 4.11:  Add a remove party button and click event
 handler

---
 client/app.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/client/app.html b/client/app.html
index 3b7d5f2..460dd4a 100644
--- a/client/app.html
+++ b/client/app.html
@@ -5,6 +5,7 @@
       {{party.name}}
       <p>{{party.description}}</p>
       <p>{{party.location}}</p>
+      <button (click)="removeParty(party)">X</button>
     </li>
   </ul>
 </div>
-- 
2.4.9 (Apple Git-60)


From 4e116ebb3149af1ceb5fb9a6a1103f469ed69eee Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sat, 17 Oct 2015 20:59:18 +0300
Subject: [PATCH 39/83] Step 4.12: Add removeParty method inside the component

---
 client/app.ts | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/client/app.ts b/client/app.ts
index e1ce3b9..3f5ce82 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -21,6 +21,10 @@ class Socially {
     constructor () {
         this.parties = Parties.find();
     }
+
+    removeParty(party) {
+        Parties.remove(party._id);
+    }
 }
 
 bootstrap(Socially);
-- 
2.4.9 (Apple Git-60)


From d5111f9474c655b1a83684ac643dd86e31a59185 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 18 Oct 2015 01:47:04 +0300
Subject: [PATCH 40/83] Step 5.1:  import routing components and add them to
 the app

---
 client/app.ts | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index 3f5ce82..e975346 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -8,12 +8,14 @@ import {bootstrap} from 'angular2-meteor';
 
 import {PartiesForm} from 'client/parties-form/parties-form';
 
+import {ROUTER_PROVIDERS, ROUTER_DIRECTIVES, RouteConfig} from 'angular2/router';
+
 @Component({
     selector: 'app'
 })
 @View({
     templateUrl: 'client/app.html',
-    directives: [NgFor, PartiesForm]
+    directives: [NgFor, PartiesForm, ROUTER_DIRECTIVES]
 })
 class Socially {
     parties: Mongo.Cursor&lt;Object>;
@@ -27,4 +29,4 @@ class Socially {
     }
 }
 
-bootstrap(Socially);
+bootstrap(Socially, [ROUTER_PROVIDERS]);
-- 
2.4.9 (Apple Git-60)


From f345c870d0767b65060b9cdbccedf3450e41b5af Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 18 Oct 2015 01:49:04 +0300
Subject: [PATCH 41/83] Step 5.2:  create PartiesList component

---
 client/parties-list/parties-list.ts | 26 ++++++++++++++++++++++++++
 1 file changed, 26 insertions(+)
 create mode 100644 client/parties-list/parties-list.ts

diff --git a/client/parties-list/parties-list.ts b/client/parties-list/parties-list.ts
new file mode 100644
index 0000000..5f574f2
--- /dev/null
+++ b/client/parties-list/parties-list.ts
@@ -0,0 +1,26 @@
+/// &lt;reference path="../../typings/angular2-meteor.d.ts" />
+
+import {Component, View, NgFor} from 'angular2/angular2';
+
+import {Parties} from 'collections/parties';
+
+import {PartiesForm} from 'client/parties-form/parties-form';
+
+@Component({
+    selector: 'app'
+})
+@View({
+    templateUrl: 'client/parties-list/parties-list.html',
+    directives: [NgFor, PartiesForm]
+})
+export class PartiesList {
+    parties: Mongo.Cursor&lt;Object>;
+
+    constructor() {
+        this.parties = Parties.find();
+    }
+
+    removeParty(party) {
+        Parties.remove(party._id);
+    }
+}
-- 
2.4.9 (Apple Git-60)


From 1d39e02f5dd1c5fa9d4511442546299d0b069675 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 18 Oct 2015 01:49:43 +0300
Subject: [PATCH 42/83] Step 5.3:  add PartiesList template

---
 client/parties-list/parties-list.html | 11 +++++++++++
 1 file changed, 11 insertions(+)
 create mode 100644 client/parties-list/parties-list.html

diff --git a/client/parties-list/parties-list.html b/client/parties-list/parties-list.html
new file mode 100644
index 0000000..460dd4a
--- /dev/null
+++ b/client/parties-list/parties-list.html
@@ -0,0 +1,11 @@
+<div>
+  <parties-form></parties-form>
+  <ul>
+    <li *ng-for="#party of parties">
+      {{party.name}}
+      <p>{{party.description}}</p>
+      <p>{{party.location}}</p>
+      <button (click)="removeParty(party)">X</button>
+    </li>
+  </ul>
+</div>
-- 
2.4.9 (Apple Git-60)


From a9ea7651d2ba5533ce5de8b524d79d34dfa8dab8 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 18 Oct 2015 01:59:44 +0300
Subject: [PATCH 43/83] Removes app.html

---
 client/app.html | 11 -----------
 1 file changed, 11 deletions(-)
 delete mode 100644 client/app.html

diff --git a/client/app.html b/client/app.html
deleted file mode 100644
index 460dd4a..0000000
--- a/client/app.html
+++ /dev/null
@@ -1,11 +0,0 @@
-<div>
-  <parties-form></parties-form>
-  <ul>
-    <li *ng-for="#party of parties">
-      {{party.name}}
-      <p>{{party.description}}</p>
-      <p>{{party.location}}</p>
-      <button (click)="removeParty(party)">X</button>
-    </li>
-  </ul>
-</div>
-- 
2.4.9 (Apple Git-60)


From c9222226b706654f128ef59afe5235389748e347 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 18 Oct 2015 02:03:06 +0300
Subject: [PATCH 44/83] Step 5.4:  clean up Socally component

---
 client/app.ts | 19 ++-----------------
 1 file changed, 2 insertions(+), 17 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index e975346..c70f06d 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -2,31 +2,16 @@
 
 import {Component, View, NgFor} from 'angular2/angular2';
 
-import {Parties} from 'collections/parties';
-
 import {bootstrap} from 'angular2-meteor';
 
-import {PartiesForm} from 'client/parties-form/parties-form';
-
 import {ROUTER_PROVIDERS, ROUTER_DIRECTIVES, RouteConfig} from 'angular2/router';
 
 @Component({
     selector: 'app'
 })
 @View({
-    templateUrl: 'client/app.html',
-    directives: [NgFor, PartiesForm, ROUTER_DIRECTIVES]
+    directives: [ROUTER_DIRECTIVES]
 })
-class Socially {
-    parties: Mongo.Cursor&lt;Object>;
-
-    constructor () {
-        this.parties = Parties.find();
-    }
-
-    removeParty(party) {
-        Parties.remove(party._id);
-    }
-}
+class Socially {}
 
 bootstrap(Socially, [ROUTER_PROVIDERS]);
-- 
2.4.9 (Apple Git-60)


From 0702de737f394a339e587d6dfb08f717f0293fe9 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 18 Oct 2015 02:14:40 +0300
Subject: [PATCH 45/83] Step 5.5:  add PartyDetails component

---
 client/party-details/party-details.ts | 11 +++++++++++
 1 file changed, 11 insertions(+)
 create mode 100644 client/party-details/party-details.ts

diff --git a/client/party-details/party-details.ts b/client/party-details/party-details.ts
new file mode 100644
index 0000000..e1104a5
--- /dev/null
+++ b/client/party-details/party-details.ts
@@ -0,0 +1,11 @@
+/// &lt;reference path="../../typings/angular2-meteor.d.ts" />
+
+import {Component, View} from 'angular2/angular2';
+
+@Component({
+  selector: 'party-details'
+})
+@View({
+  templateUrl: '/client/party-details/party-details.html'
+})
+export class PartyDetails {}
-- 
2.4.9 (Apple Git-60)


From d3d6eea712445df29a0fb2d4772268b86cb7b6ec Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 18 Oct 2015 02:15:46 +0300
Subject: [PATCH 46/83] Step 5.6:  add PartyDetails template

---
 client/party-details/party-details.html | 5 +++++
 1 file changed, 5 insertions(+)
 create mode 100644 client/party-details/party-details.html

diff --git a/client/party-details/party-details.html b/client/party-details/party-details.html
new file mode 100644
index 0000000..63fdaea
--- /dev/null
+++ b/client/party-details/party-details.html
@@ -0,0 +1,5 @@
+<header>
+  <h2>PARTY_NAME</h2>
+
+  <p>PARTY_DESCRIPTION</p>
+</header>
-- 
2.4.9 (Apple Git-60)


From 3583c48c6c982bbe443d32f3261e74df7b1af091 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 18 Oct 2015 02:19:18 +0300
Subject: [PATCH 47/83] Step 5.7:  configure routes

---
 client/app.ts | 15 ++++++++++++---
 1 file changed, 12 insertions(+), 3 deletions(-)

diff --git a/client/app.ts b/client/app.ts
index c70f06d..6a32c1b 100644
--- a/client/app.ts
+++ b/client/app.ts
@@ -1,17 +1,26 @@
 /// &lt;reference path="../typings/angular2-meteor.d.ts" />
 
-import {Component, View, NgFor} from 'angular2/angular2';
+import {Component, View, NgFor, provide} from 'angular2/angular2';
 
 import {bootstrap} from 'angular2-meteor';
 
-import {ROUTER_PROVIDERS, ROUTER_DIRECTIVES, RouteConfig} from 'angular2/router';
+import {ROUTER_PROVIDERS, ROUTER_DIRECTIVES, RouteConfig, APP_BASE_HREF} from 'angular2/router';
+
+import {PartiesList} from 'client/parties-list/parties-list';
+
+import {PartyDetails} from 'client/party-details/party-details';
 
 @Component({
     selector: 'app'
 })
 @View({
+    template: '&lt;router-outlet>&lt;/router-outlet>',
     directives: [ROUTER_DIRECTIVES]
 })
+@RouteConfig([
+    { path: '/', as: 'PartiesList', component: PartiesList },
+    { path: '/party/:partyId', as: 'PartyDetails', component: PartyDetails }
+])
 class Socially {}
 
-bootstrap(Socially, [ROUTER_PROVIDERS]);
+bootstrap(Socially, [ROUTER_PROVIDERS, provide(APP_BASE_HREF, { useValue: '/' })]);
-- 
2.4.9 (Apple Git-60)


From 85b02ffd9bc70d7afe60fa2b88114b1b3e7043e4 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 18 Oct 2015 03:17:25 +0300
Subject: [PATCH 48/83] Step 5.8:  import RouterLink directive

---
 client/parties-list/parties-list.ts | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/client/parties-list/parties-list.ts b/client/parties-list/parties-list.ts
index 5f574f2..6971f05 100644
--- a/client/parties-list/parties-list.ts
+++ b/client/parties-list/parties-list.ts
@@ -6,12 +6,14 @@ import {Parties} from 'collections/parties';
 
 import {PartiesForm} from 'client/parties-form/parties-form';
 
+import {RouterLink} from 'angular2/router';
+
 @Component({
     selector: 'app'
 })
 @View({
     templateUrl: 'client/parties-list/parties-list.html',
-    directives: [NgFor, PartiesForm]
+    directives: [NgFor, PartiesForm, RouterLink]
 })
 export class PartiesList {
     parties: Mongo.Cursor&lt;Object>;
-- 
2.4.9 (Apple Git-60)


From f9ef1febe169071436b14cb2909b93bc9d9931ff Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 18 Oct 2015 03:19:56 +0300
Subject: [PATCH 49/83] Step 5.9:  add links to the parties list

---
 client/parties-list/parties-list.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/parties-list/parties-list.html b/client/parties-list/parties-list.html
index 460dd4a..c437199 100644
--- a/client/parties-list/parties-list.html
+++ b/client/parties-list/parties-list.html
@@ -2,7 +2,7 @@
   <parties-form></parties-form>
   <ul>
     <li *ng-for="#party of parties">
-      {{party.name}}
+      <a [router-link]="['/PartyDetails', {partyId: party._id}]">{{party.name}}</a>
       <p>{{party.description}}</p>
       <p>{{party.location}}</p>
       <button (click)="removeParty(party)">X</button>
-- 
2.4.9 (Apple Git-60)


From ef43f0eb176eb5da1d43a9143b8b85ae614885bd Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 18 Oct 2015 20:11:55 +0300
Subject: [PATCH 50/83] Step 5.10:  injecting route parameters

---
 client/party-details/party-details.ts | 12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)

diff --git a/client/party-details/party-details.ts b/client/party-details/party-details.ts
index e1104a5..ccba796 100644
--- a/client/party-details/party-details.ts
+++ b/client/party-details/party-details.ts
@@ -2,10 +2,16 @@
 
 import {Component, View} from 'angular2/angular2';
 
+import {RouteParams} from 'angular2/router';
+
 @Component({
-  selector: 'party-details'
+    selector: 'party-details'
 })
 @View({
-  templateUrl: '/client/party-details/party-details.html'
+    templateUrl: '/client/party-details/party-details.html'
 })
-export class PartyDetails {}
+export class PartyDetails {
+    constructor(params: RouteParams) {
+        var partyId = params.get('partyId');
+    }
+}
-- 
2.4.9 (Apple Git-60)


From d820dae958f76ac9a40ec97ec1e083d3e7739cb7 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 18 Oct 2015 20:44:54 +0300
Subject: [PATCH 51/83] Step 5.11:  load party details

---
 client/party-details/party-details.ts | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/client/party-details/party-details.ts b/client/party-details/party-details.ts
index ccba796..c8a3139 100644
--- a/client/party-details/party-details.ts
+++ b/client/party-details/party-details.ts
@@ -4,6 +4,8 @@ import {Component, View} from 'angular2/angular2';
 
 import {RouteParams} from 'angular2/router';
 
+import {Parties} from 'collections/parties';
+
 @Component({
     selector: 'party-details'
 })
@@ -11,7 +13,10 @@ import {RouteParams} from 'angular2/router';
     templateUrl: '/client/party-details/party-details.html'
 })
 export class PartyDetails {
+    party: Object;
+
     constructor(params: RouteParams) {
         var partyId = params.get('partyId');
+        this.party = Parties.findOne(partyId);
     }
 }
-- 
2.4.9 (Apple Git-60)


From c2bcc2ee392c988f1e962e81dc722ed8ded29a2b Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 18 Oct 2015 20:45:51 +0300
Subject: [PATCH 52/83] Step 5.12:  render party details

---
 client/party-details/party-details.html | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/client/party-details/party-details.html b/client/party-details/party-details.html
index 63fdaea..b88d435 100644
--- a/client/party-details/party-details.html
+++ b/client/party-details/party-details.html
@@ -1,5 +1,7 @@
 <header>
-  <h2>PARTY_NAME</h2>
+  <h2>{{party.name}}</h2>
 
-  <p>PARTY_DESCRIPTION</p>
+  <p>{{party.description}}</p>
+
+  <p>{{party.location}}</p>
 </header>
-- 
2.4.9 (Apple Git-60)


From 27c47be2531003b3a6b0b036a4328220eebb97b9 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 8 Nov 2015 23:23:24 +0300
Subject: [PATCH 53/83] Adds RouterLink dependency.

---
 client/party-details/party-details.ts | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/client/party-details/party-details.ts b/client/party-details/party-details.ts
index c8a3139..717c65c 100644
--- a/client/party-details/party-details.ts
+++ b/client/party-details/party-details.ts
@@ -6,11 +6,14 @@ import {RouteParams} from 'angular2/router';
 
 import {Parties} from 'collections/parties';
 
+import {RouterLink} from 'angular2/router';
+
 @Component({
     selector: 'party-details'
 })
 @View({
-    templateUrl: '/client/party-details/party-details.html'
+    templateUrl: '/client/party-details/party-details.html',
+    directives: [RouterLink]
 })
 export class PartyDetails {
     party: Object;
-- 
2.4.9 (Apple Git-60)


From 9768ad217a48003df96e492018d17d656de4870f Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 8 Nov 2015 23:24:33 +0300
Subject: [PATCH 54/83] Step 6.1: add party details form

---
 client/party-details/party-details.html | 16 +++++++++++-----
 1 file changed, 11 insertions(+), 5 deletions(-)

diff --git a/client/party-details/party-details.html b/client/party-details/party-details.html
index b88d435..3a07b4a 100644
--- a/client/party-details/party-details.html
+++ b/client/party-details/party-details.html
@@ -1,7 +1,13 @@
-<header>
-  <h2>{{party.name}}</h2>
+<form>
+  <label>Name</label>
+  <input type="text">
 
-  <p>{{party.description}}</p>
+  <label>Description</label>
+  <input type="text">
 
-  <p>{{party.location}}</p>
-</header>
+  <label>Location</label>
+  <input type="text">
+
+  <button type="submit">Save</button>
+  <button [router-link]="['/PartiesList']">Cancel</button>
+</form>
-- 
2.4.9 (Apple Git-60)


From 2727d11b6663beffce60f4603d29da56429f0b6b Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 8 Nov 2015 23:30:58 +0300
Subject: [PATCH 55/83] Step 6.2: add form directives

---
 client/party-details/party-details.ts | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/client/party-details/party-details.ts b/client/party-details/party-details.ts
index 717c65c..44fbc59 100644
--- a/client/party-details/party-details.ts
+++ b/client/party-details/party-details.ts
@@ -1,6 +1,6 @@
 /// &lt;reference path="../../typings/angular2-meteor.d.ts" />
 
-import {Component, View} from 'angular2/angular2';
+import {FORM_DIRECTIVES, Component, View} from 'angular2/angular2';
 
 import {RouteParams} from 'angular2/router';
 
@@ -13,7 +13,7 @@ import {RouterLink} from 'angular2/router';
 })
 @View({
     templateUrl: '/client/party-details/party-details.html',
-    directives: [RouterLink]
+    directives: [RouterLink, FORM_DIRECTIVES]
 })
 export class PartyDetails {
     party: Object;
-- 
2.4.9 (Apple Git-60)


From 3abc1430bbbd5218c2222f00b3311287d389958f Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 8 Nov 2015 23:44:19 +0300
Subject: [PATCH 56/83] Step 6.3: bind party to form inputs

---
 client/party-details/party-details.html | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/client/party-details/party-details.html b/client/party-details/party-details.html
index 3a07b4a..3258d93 100644
--- a/client/party-details/party-details.html
+++ b/client/party-details/party-details.html
@@ -1,12 +1,12 @@
-<form>
+<form (submit)="saveParty(party)">
   <label>Name</label>
-  <input type="text">
+  <input type="text" [(ng-model)]="party.name">
 
   <label>Description</label>
-  <input type="text">
+  <input type="text" [(ng-model)]="party.description">
 
   <label>Location</label>
-  <input type="text">
+  <input type="text" [(ng-model)]="party.location">
 
   <button type="submit">Save</button>
   <button [router-link]="['/PartiesList']">Cancel</button>
-- 
2.4.9 (Apple Git-60)


From 776bde7718a909a82744634955f839fdd11a0309 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Sun, 8 Nov 2015 23:53:48 +0300
Subject: [PATCH 57/83] Step 6.4: add submit event handler

---
 client/party-details/party-details.ts | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/client/party-details/party-details.ts b/client/party-details/party-details.ts
index 44fbc59..decdf9a 100644
--- a/client/party-details/party-details.ts
+++ b/client/party-details/party-details.ts
@@ -22,4 +22,14 @@ export class PartyDetails {
         var partyId = params.get('partyId');
         this.party = Parties.findOne(partyId);
     }
+
+    saveParty(party) {
+      Parties.update(party._id, {
+        $set: {
+          name: party.name,
+          description: party.description,
+          location: party.location
+        }
+      });
+    }
 }
-- 
2.4.9 (Apple Git-60)


From 28f112d5f4fee1edfeb34808a380be71ce42d655 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Tue, 17 Nov 2015 19:24:23 +0300
Subject: [PATCH 58/83] Step 7.1: declare Party type

---
 typings/party.d.ts | 6 ++++++
 1 file changed, 6 insertions(+)
 create mode 100644 typings/party.d.ts

diff --git a/typings/party.d.ts b/typings/party.d.ts
new file mode 100644
index 0000000..fbafc08
--- /dev/null
+++ b/typings/party.d.ts
@@ -0,0 +1,6 @@
+declare type Party = {
+  _id?: string,
+  name: string,
+  description?: string,
+  location: string
+}
-- 
2.4.9 (Apple Git-60)


From e3176b248945a9bd415284d517682166c2898308 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Tue, 17 Nov 2015 19:37:25 +0300
Subject: [PATCH 59/83] Step 7.2: define parties collection with Party type

---
 collections/parties.ts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/collections/parties.ts b/collections/parties.ts
index d1ed853..dd07460 100644
--- a/collections/parties.ts
+++ b/collections/parties.ts
@@ -1,3 +1,4 @@
 /// &lt;reference path="../typings/angular2-meteor.d.ts" />
+/// &lt;reference path="../typings/party.d.ts" />
 
-export var Parties = new Mongo.Collection('parties');
+export var Parties = new Mongo.Collection&lt;Party>('parties');
-- 
2.4.9 (Apple Git-60)


From 96e99d23187d272c2d792ca95c6e6bba3cc5e3b6 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Tue, 17 Nov 2015 20:17:12 +0300
Subject: [PATCH 60/83] Step 7.3: correct parties cursor to be of the exact
 type

---
 client/parties-list/parties-list.ts | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/parties-list/parties-list.ts b/client/parties-list/parties-list.ts
index 6971f05..403ffc4 100644
--- a/client/parties-list/parties-list.ts
+++ b/client/parties-list/parties-list.ts
@@ -16,7 +16,7 @@ import {RouterLink} from 'angular2/router';
     directives: [NgFor, PartiesForm, RouterLink]
 })
 export class PartiesList {
-    parties: Mongo.Cursor&lt;Object>;
+    parties: Mongo.Cursor&lt;Party>;
 
     constructor() {
         this.parties = Parties.find();
-- 
2.4.9 (Apple Git-60)


From 8fa9eacaca8a2d8092b0c60d7250b9c083e68bc3 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Tue, 17 Nov 2015 20:18:03 +0300
Subject: [PATCH 61/83] Step 7.4: correct party property to be of Party type

---
 client/party-details/party-details.ts | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/party-details/party-details.ts b/client/party-details/party-details.ts
index decdf9a..b2363fb 100644
--- a/client/party-details/party-details.ts
+++ b/client/party-details/party-details.ts
@@ -16,7 +16,7 @@ import {RouterLink} from 'angular2/router';
     directives: [RouterLink, FORM_DIRECTIVES]
 })
 export class PartyDetails {
-    party: Object;
+    party: Party;
 
     constructor(params: RouteParams) {
         var partyId = params.get('partyId');
-- 
2.4.9 (Apple Git-60)


From 6c0ff810dfea430e16e1927fb6050b96ce9e6eb4 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Tue, 10 Nov 2015 17:40:30 +0300
Subject: [PATCH 62/83] Removes insecure, adds Accounts UI package

---
 .meteor/packages | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/.meteor/packages b/.meteor/packages
index 2f89e25..6160a20 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -15,5 +15,6 @@ standard-minifiers      # JS/CSS minifiers run for production mode
 es5-shim                # ECMAScript 5 compatibility for older browsers.
 
 autopublish             # Publish all data to the clients (for prototyping)
-insecure                # Allow all DB writes from clients (for prototyping)
 urigo:angular2-meteor
+accounts-password
+barbatus:ng2-meteor-accounts-ui
-- 
2.4.9 (Apple Git-60)


From 74235ae5af84c305b126fd3d4b82f77dbda56bb9 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Tue, 10 Nov 2015 17:45:50 +0300
Subject: [PATCH 63/83] Step 8.1: add Accounts UI component to the PartiesForm
 template

---
 client/parties-form/parties-form.html | 1 +
 1 file changed, 1 insertion(+)

diff --git a/client/parties-form/parties-form.html b/client/parties-form/parties-form.html
index ec3a114..31b6d25 100644
--- a/client/parties-form/parties-form.html
+++ b/client/parties-form/parties-form.html
@@ -6,4 +6,5 @@
   <label>Location</label>
   <input type="text" ng-control="location">
   <button>Add</button>
+  <accounts-ui></accounts-ui>
 </form>
-- 
2.4.9 (Apple Git-60)


From 527dc66dc058afe99ee495d95d4e5f80966184b5 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Tue, 10 Nov 2015 17:47:00 +0300
Subject: [PATCH 64/83] Step 8.2: import dependencies

---
 client/parties-form/parties-form.ts | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/client/parties-form/parties-form.ts b/client/parties-form/parties-form.ts
index 18dee47..c4e7a4e 100644
--- a/client/parties-form/parties-form.ts
+++ b/client/parties-form/parties-form.ts
@@ -1,4 +1,5 @@
 /// &lt;reference path="../../typings/angular2-meteor.d.ts" />
+/// &lt;reference path="../../typings/meteor-accounts-ui.d.ts" />
 
 import {Component, View} from 'angular2/angular2';
 
@@ -6,12 +7,14 @@ import {FORM_DIRECTIVES, FormBuilder, Control, ControlGroup, Validators} from 'a
 
 import {Parties} from 'collections/parties';
 
+import {AccountsUI} from 'meteor-accounts-ui';
+
 @Component({
     selector: 'parties-form'
 })
 @View({
     templateUrl: 'client/parties-form/parties-form.html',
-    directives: [FORM_DIRECTIVES]
+    directives: [FORM_DIRECTIVES, AccountsUI]
 })
 export class PartiesForm {
     partiesForm: ControlGroup;
-- 
2.4.9 (Apple Git-60)


From 544cdc78cb2f6165fbe05512d5beb247af018d67 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Tue, 10 Nov 2015 18:13:17 +0300
Subject: [PATCH 65/83] Step 8.3: add parties collection security

---
 collections/parties.ts | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

diff --git a/collections/parties.ts b/collections/parties.ts
index dd07460..5939f6f 100644
--- a/collections/parties.ts
+++ b/collections/parties.ts
@@ -2,3 +2,18 @@
 /// &lt;reference path="../typings/party.d.ts" />
 
 export var Parties = new Mongo.Collection&lt;Party>('parties');
+
+Parties.allow({
+  insert: function(party: Object) {
+    var user = Meteor.user();
+    return !!user;
+  },
+  update: function(party: Object, fields, modifier) {
+    var user = Meteor.user();
+    return !!user;
+  },
+  remove: function(party: Object) {
+    var user = Meteor.user();
+    return !!user;
+  }
+});
-- 
2.4.9 (Apple Git-60)


From 8d0584729e1f94e40172717dd068ede492b3fdfa Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Tue, 10 Nov 2015 18:34:06 +0300
Subject: [PATCH 66/83] Step 8.4: check access and add party owner ID along
 with other data

---
 client/parties-form/parties-form.ts | 23 ++++++++++++++---------
 1 file changed, 14 insertions(+), 9 deletions(-)

diff --git a/client/parties-form/parties-form.ts b/client/parties-form/parties-form.ts
index c4e7a4e..c656aeb 100644
--- a/client/parties-form/parties-form.ts
+++ b/client/parties-form/parties-form.ts
@@ -30,15 +30,20 @@ export class PartiesForm {
 
     addParty(party) {
         if (this.partiesForm.valid) {
-            Parties.insert({
-                name: party.name,
-                description: party.description,
-                location: party.location
-            });
-
-            (&lt;Control>this.partiesForm.controls['name']).updateValue('');
-            (&lt;Control>this.partiesForm.controls['description']).updateValue('');
-            (&lt;Control>this.partiesForm.controls['location']).updateValue('');
+            if (Meteor.userId()) {
+                Parties.insert({
+                    name: party.name,
+                    description: party.description,
+                    location: party.location,
+                    owner: Meteor.userId()
+                });
+
+                (&lt;Control>this.partiesForm.controls['name']).updateValue('');
+                (&lt;Control>this.partiesForm.controls['description']).updateValue('');
+                (&lt;Control>this.partiesForm.controls['location']).updateValue('');
+            } else {
+                alert('Please log in to add a party');
+            }
         }
     }
 }
-- 
2.4.9 (Apple Git-60)


From 628d1ae7027dc71c8701491858b6e63495a507ec Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Tue, 10 Nov 2015 18:35:51 +0300
Subject: [PATCH 67/83] Step 8.5: check access to change party

---
 client/party-details/party-details.ts | 18 +++++++++++-------
 1 file changed, 11 insertions(+), 7 deletions(-)

diff --git a/client/party-details/party-details.ts b/client/party-details/party-details.ts
index b2363fb..8dbeb66 100644
--- a/client/party-details/party-details.ts
+++ b/client/party-details/party-details.ts
@@ -24,12 +24,16 @@ export class PartyDetails {
     }
 
     saveParty(party) {
-      Parties.update(party._id, {
-        $set: {
-          name: party.name,
-          description: party.description,
-          location: party.location
-        }
-      });
+      if (Meteor.userId()) {
+        Parties.update(party._id, {
+          $set: {
+            name: party.name,
+            description: party.description,
+            location: party.location
+          }
+        });
+      } else {
+        alert('Please log in to change this party');
+      }
     }
 }
-- 
2.4.9 (Apple Git-60)


From 8ffccf0fa21500146990910aec3e976c71f5c2af Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Tue, 10 Nov 2015 19:23:11 +0300
Subject: [PATCH 68/83] Adds base Accounts package

---
 .meteor/packages | 1 +
 1 file changed, 1 insertion(+)

diff --git a/.meteor/packages b/.meteor/packages
index 6160a20..a1a7442 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -18,3 +18,4 @@ autopublish             # Publish all data to the clients (for prototyping)
 urigo:angular2-meteor
 accounts-password
 barbatus:ng2-meteor-accounts-ui
+barbatus:ng2-meteor-accounts
-- 
2.4.9 (Apple Git-60)


From 9935282f375b8690835a295fcbc6ad75344eea73 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Tue, 10 Nov 2015 19:23:40 +0300
Subject: [PATCH 69/83] Step 8.6: require user to access PartyDetails

---
 client/party-details/party-details.ts | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/client/party-details/party-details.ts b/client/party-details/party-details.ts
index 8dbeb66..25f6b31 100644
--- a/client/party-details/party-details.ts
+++ b/client/party-details/party-details.ts
@@ -1,4 +1,5 @@
 /// &lt;reference path="../../typings/angular2-meteor.d.ts" />
+/// &lt;reference path="../../typings/meteor-accounts.d.ts" />
 
 import {FORM_DIRECTIVES, Component, View} from 'angular2/angular2';
 
@@ -8,6 +9,8 @@ import {Parties} from 'collections/parties';
 
 import {RouterLink} from 'angular2/router';
 
+import {RequireUser} from 'meteor-accounts';
+
 @Component({
     selector: 'party-details'
 })
@@ -15,6 +18,7 @@ import {RouterLink} from 'angular2/router';
     templateUrl: '/client/party-details/party-details.html',
     directives: [RouterLink, FORM_DIRECTIVES]
 })
+@RequireUser()
 export class PartyDetails {
     party: Party;
 
-- 
2.4.9 (Apple Git-60)


From 2cae8e03da36b2a7312d51ab2617cceca1bc0d3c Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Fri, 13 Nov 2015 16:54:07 +0300
Subject: [PATCH 70/83] Removes autopublish

---
 .meteor/packages | 1 -
 1 file changed, 1 deletion(-)

diff --git a/.meteor/packages b/.meteor/packages
index a1a7442..cd3ad8c 100644
--- a/.meteor/packages
+++ b/.meteor/packages
@@ -14,7 +14,6 @@ tracker                 # Meteor's client-side reactive programming library
 standard-minifiers      # JS/CSS minifiers run for production mode
 es5-shim                # ECMAScript 5 compatibility for older browsers.
 
-autopublish             # Publish all data to the clients (for prototyping)
 urigo:angular2-meteor
 accounts-password
 barbatus:ng2-meteor-accounts-ui
-- 
2.4.9 (Apple Git-60)


From 373cef2dc9429f22c1aeb6e5e2ae56725e55be94 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Fri, 13 Nov 2015 16:54:32 +0300
Subject: [PATCH 71/83] Step 9.1: publish parties collection

---
 server/parties.ts | 7 +++++++
 1 file changed, 7 insertions(+)
 create mode 100644 server/parties.ts

diff --git a/server/parties.ts b/server/parties.ts
new file mode 100644
index 0000000..b477b43
--- /dev/null
+++ b/server/parties.ts
@@ -0,0 +1,7 @@
+/// &lt;reference path="../typings/angular2-meteor.d.ts" />
+
+import {Parties} from 'collections/parties';
+
+Meteor.publish('parties', function() {
+    return Parties.find();
+});
-- 
2.4.9 (Apple Git-60)


From 027c5a80238db5be36c13838de084154c48323ba Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Fri, 13 Nov 2015 16:56:16 +0300
Subject: [PATCH 72/83] Step 9.2: import parties publications on the server

---
 server/main.ts | 1 +
 1 file changed, 1 insertion(+)

diff --git a/server/main.ts b/server/main.ts
index 80ba2c9..534fa3b 100644
--- a/server/main.ts
+++ b/server/main.ts
@@ -1,3 +1,4 @@
 import {loadParties} from './load_parties';
+import './parties';
 
 Meteor.startup(loadParties);
-- 
2.4.9 (Apple Git-60)


From 7481dfe2a42a34a75f00b1d1942f77063e50bad2 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Fri, 13 Nov 2015 17:12:19 +0300
Subject: [PATCH 73/83] Step 9.3: extend PartiesList and make use of subscribe
 method

---
 client/parties-list/parties-list.ts | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/client/parties-list/parties-list.ts b/client/parties-list/parties-list.ts
index 403ffc4..8a9a048 100644
--- a/client/parties-list/parties-list.ts
+++ b/client/parties-list/parties-list.ts
@@ -8,6 +8,8 @@ import {PartiesForm} from 'client/parties-form/parties-form';
 
 import {RouterLink} from 'angular2/router';
 
+import {MeteorComponent} from 'angular2-meteor';
+
 @Component({
     selector: 'app'
 })
@@ -15,11 +17,14 @@ import {RouterLink} from 'angular2/router';
     templateUrl: 'client/parties-list/parties-list.html',
     directives: [NgFor, PartiesForm, RouterLink]
 })
-export class PartiesList {
+export class PartiesList extends MeteorComponent {
     parties: Mongo.Cursor&lt;Party>;
 
     constructor() {
-        this.parties = Parties.find();
+        super();
+        this.subscribe('parties', () => {
+            this.parties = Parties.find();
+        }, true);
     }
 
     removeParty(party) {
-- 
2.4.9 (Apple Git-60)


From c0f4bf2ccdadc1a5bb72fad65fabe5b8d8693ac6 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Fri, 13 Nov 2015 17:23:21 +0300
Subject: [PATCH 74/83] Step 9.4: add "Public" checkbox

---
 client/parties-form/parties-form.html | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/client/parties-form/parties-form.html b/client/parties-form/parties-form.html
index 31b6d25..37a029e 100644
--- a/client/parties-form/parties-form.html
+++ b/client/parties-form/parties-form.html
@@ -5,6 +5,8 @@
   <input type="text" ng-control="description">
   <label>Location</label>
   <input type="text" ng-control="location">
+  <label>Public</label>
+  <input type="checkbox" ng-control="public">
   <button>Add</button>
   <accounts-ui></accounts-ui>
 </form>
-- 
2.4.9 (Apple Git-60)


From dece2680aa7c3b407aa2c7f9863048d64d6d7ac3 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Fri, 13 Nov 2015 17:50:21 +0300
Subject: [PATCH 75/83] Step 9.5: update PartiesForm component

---
 client/parties-form/parties-form.ts | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/client/parties-form/parties-form.ts b/client/parties-form/parties-form.ts
index c656aeb..d92d639 100644
--- a/client/parties-form/parties-form.ts
+++ b/client/parties-form/parties-form.ts
@@ -24,7 +24,8 @@ export class PartiesForm {
         this.partiesForm = fb.group({
             name: ['', Validators.required],
             description: [''],
-            location: ['', Validators.required]
+            location: ['', Validators.required],
+            public: [false]
         });
     }
 
@@ -35,12 +36,14 @@ export class PartiesForm {
                     name: party.name,
                     description: party.description,
                     location: party.location,
+                    public: party.public,
                     owner: Meteor.userId()
                 });
 
                 (&lt;Control>this.partiesForm.controls['name']).updateValue('');
                 (&lt;Control>this.partiesForm.controls['description']).updateValue('');
                 (&lt;Control>this.partiesForm.controls['location']).updateValue('');
+                (&lt;Control>this.partiesForm.controls['public']).updateValue(false);
             } else {
                 alert('Please log in to add a party');
             }
-- 
2.4.9 (Apple Git-60)


From ceb21e32e8989a111848e8477e24bf6d1c9866df Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Fri, 13 Nov 2015 17:51:40 +0300
Subject: [PATCH 76/83] Step 9.6: add public field to the initial parties

---
 server/load_parties.ts | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

diff --git a/server/load_parties.ts b/server/load_parties.ts
index 65c914a..51bdd88 100644
--- a/server/load_parties.ts
+++ b/server/load_parties.ts
@@ -7,17 +7,20 @@ export function loadParties() {
         {
             'name': 'Dubstep-Free Zone',
             'description': 'Can we please just for an evening not listen to dubstep.',
-            'location': 'Palo Alto'
+            'location': 'Palo Alto',
+            'public': true
         },
         {
             'name': 'All dubstep all the time',
             'description': 'Get it on!',
-            'location': 'Palo Alto'
+            'location': 'Palo Alto',
+            'public': true
         },
         {
             'name': 'Savage lounging',
             'description': 'Leisure suit required. And only fiercest manners.',
-            'location': 'San Francisco'
+            'location': 'San Francisco',
+            'public': false
         }
     ];
 
-- 
2.4.9 (Apple Git-60)


From d9599c82bf134b4f263957bdd435f2b25707003e Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Fri, 13 Nov 2015 18:13:29 +0300
Subject: [PATCH 77/83] Step 9.7: limit data sent to the client

---
 server/parties.ts | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/server/parties.ts b/server/parties.ts
index b477b43..2db5c15 100644
--- a/server/parties.ts
+++ b/server/parties.ts
@@ -3,5 +3,15 @@
 import {Parties} from 'collections/parties';
 
 Meteor.publish('parties', function() {
-    return Parties.find();
+    return Parties.find({
+        $or: [
+            { public: true },
+            {
+                $and: [
+                  { owner: this.userId },
+                  { owner: { $exists: true } }
+                ]
+            }
+        ]
+    });
 });
-- 
2.4.9 (Apple Git-60)


From 3c6bf7d2075830e310bc3d706ba477ad2c6e8daf Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Fri, 13 Nov 2015 18:36:07 +0300
Subject: [PATCH 78/83] Step 9.8: add "party" publication

---
 server/parties.ts | 24 +++++++++++++++++++-----
 1 file changed, 19 insertions(+), 5 deletions(-)

diff --git a/server/parties.ts b/server/parties.ts
index 2db5c15..2f17143 100644
--- a/server/parties.ts
+++ b/server/parties.ts
@@ -2,16 +2,30 @@
 
 import {Parties} from 'collections/parties';
 
-Meteor.publish('parties', function() {
-    return Parties.find({
+function buildQuery(partyId?: string): Object {
+    var isAvailable = {
         $or: [
             { public: true },
             {
                 $and: [
-                  { owner: this.userId },
-                  { owner: { $exists: true } }
+                    { owner: this.userId },
+                    { owner: { $exists: true } }
                 ]
             }
         ]
-    });
+    };
+
+    if (partyId) {
+        return { $and: [{ _id: partyId }, isAvailable] };
+    }
+
+    return isAvailable;
+}
+
+Meteor.publish('parties', function() {
+    return Parties.find(buildQuery.call(this));
+});
+
+Meteor.publish('party', function(partyId) {
+    return Parties.find(buildQuery.call(this, partyId));
 });
-- 
2.4.9 (Apple Git-60)


From bb97906a5a8b8385469555dc2045105f147687d8 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Fri, 13 Nov 2015 18:51:42 +0300
Subject: [PATCH 79/83] Step 9.9: subscribe to "party" publication

---
 client/party-details/party-details.ts | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/client/party-details/party-details.ts b/client/party-details/party-details.ts
index 25f6b31..0e2947d 100644
--- a/client/party-details/party-details.ts
+++ b/client/party-details/party-details.ts
@@ -11,6 +11,8 @@ import {RouterLink} from 'angular2/router';
 
 import {RequireUser} from 'meteor-accounts';
 
+import {MeteorComponent} from 'angular2-meteor';
+
 @Component({
     selector: 'party-details'
 })
@@ -19,12 +21,15 @@ import {RequireUser} from 'meteor-accounts';
     directives: [RouterLink, FORM_DIRECTIVES]
 })
 @RequireUser()
-export class PartyDetails {
+export class PartyDetails extends MeteorComponent {
     party: Party;
 
     constructor(params: RouteParams) {
+        super();
         var partyId = params.get('partyId');
-        this.party = Parties.findOne(partyId);
+        this.subscribe('party', () => {
+            this.party = Parties.findOne(partyId);
+        }, true);
     }
 
     saveParty(party) {
-- 
2.4.9 (Apple Git-60)


From 73e982f2b6d164ffd0dd792793e7beeac22374a7 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Fri, 13 Nov 2015 18:52:51 +0300
Subject: [PATCH 80/83] Step 9.10: update PartyDetails form to be shown when
 party is loaded

---
 client/party-details/party-details.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/client/party-details/party-details.html b/client/party-details/party-details.html
index 3258d93..6b49b21 100644
--- a/client/party-details/party-details.html
+++ b/client/party-details/party-details.html
@@ -1,4 +1,4 @@
-<form (submit)="saveParty(party)">
+<form (submit)="saveParty(party)" *ng-if="party">
   <label>Name</label>
   <input type="text" [(ng-model)]="party.name">
 
-- 
2.4.9 (Apple Git-60)


From b84f9105e115cfb8e6af754ec01873c80a4572ee Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Fri, 13 Nov 2015 19:36:06 +0300
Subject: [PATCH 81/83] Step 9.11: add search inputs

---
 client/parties-list/parties-list.html | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/client/parties-list/parties-list.html b/client/parties-list/parties-list.html
index c437199..297afdc 100644
--- a/client/parties-list/parties-list.html
+++ b/client/parties-list/parties-list.html
@@ -1,5 +1,7 @@
 <div>
-  <parties-form></parties-form>
+  <parties-form style="display: inline-block"></parties-form>
+  <input type="text" #searchtext placeholder="Search by Location">
+  <button type="button" (click)="search(searchtext.value)">Search</button>
   <ul>
     <li *ng-for="#party of parties">
       <a [router-link]="['/PartyDetails', {partyId: party._id}]">{{party.name}}</a>
-- 
2.4.9 (Apple Git-60)


From e43c1d4bd01e69f2e4c53956360b261401da4e9d Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Fri, 13 Nov 2015 19:36:32 +0300
Subject: [PATCH 82/83] Step 9.12: add search event handler

---
 client/parties-list/parties-list.ts | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/client/parties-list/parties-list.ts b/client/parties-list/parties-list.ts
index 8a9a048..36d9a5b 100644
--- a/client/parties-list/parties-list.ts
+++ b/client/parties-list/parties-list.ts
@@ -30,4 +30,12 @@ export class PartiesList extends MeteorComponent {
     removeParty(party) {
         Parties.remove(party._id);
     }
+
+    search(value) {
+        if (value) {
+            this.parties = Parties.find({ location: value });
+        } else {
+            this.parties = Parties.find();
+        }
+    }
 }
-- 
2.4.9 (Apple Git-60)


From 828f4fd442198abaea48e4419eb9d20ee8c20106 Mon Sep 17 00:00:00 2001
From: barbatus <alex.borodach@gmail.com>
Date: Fri, 13 Nov 2015 20:51:03 +0300
Subject: [PATCH 83/83] Adds NgIf dependency

---
 client/party-details/party-details.ts | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/client/party-details/party-details.ts b/client/party-details/party-details.ts
index 0e2947d..a6bfc56 100644
--- a/client/party-details/party-details.ts
+++ b/client/party-details/party-details.ts
@@ -1,7 +1,7 @@
 /// &lt;reference path="../../typings/angular2-meteor.d.ts" />
 /// &lt;reference path="../../typings/meteor-accounts.d.ts" />
 
-import {FORM_DIRECTIVES, Component, View} from 'angular2/angular2';
+import {FORM_DIRECTIVES, Component, View, NgIf} from 'angular2/angular2';
 
 import {RouteParams} from 'angular2/router';
 
@@ -18,7 +18,7 @@ import {MeteorComponent} from 'angular2-meteor';
 })
 @View({
     templateUrl: '/client/party-details/party-details.html',
-    directives: [RouterLink, FORM_DIRECTIVES]
+    directives: [RouterLink, FORM_DIRECTIVES, NgIf]
 })
 @RequireUser()
 export class PartyDetails extends MeteorComponent {
-- 
2.4.9 (Apple Git-60)

